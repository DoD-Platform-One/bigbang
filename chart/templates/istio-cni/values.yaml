{{- $pkg := "istioCNI" }}

{{- /* Create secret */ -}}
{{- if .Values.istioCNI.enabled }}
{{- include "values-secret" (dict "root" $ "package" (get .Values $pkg) "name" "istio-cni" "defaults" (include "bigbang.defaults.istio-cni" .)) }}
{{- end }}

{{- define "bigbang.defaults.istio-cni" -}}
upstream:
  # Including this here as we will likely have a global variable that enable/disables
  ambient:
    enabled: false
  global:
    imagePullPolicy: {{ .Values.imagePullPolicy }}
    imagePullSecrets:
      - private-registry
{{- end }}
