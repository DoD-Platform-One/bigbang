stages:
  - build
  - scan
  - promote

include:
  - local: /jobs/build/base.yml
  - local: /jobs/scan/base.yml
  - local: /jobs/promote/base.yml

# Project specific variables
variables:
  # Specifies location of DOCKERFILE in project
  DOCKERFILE_DIR: "."
  DOCKERFILE_NAME: "Dockerfile"

  # set pipeline image - not sure what people use to do docker builds?
  PIPELINE_DEFAULT_IMAGE: alpine:latest

build:
  extends: .kaniko

scan container:
  extends: .trivy scan

promote:
  extends: .promote
