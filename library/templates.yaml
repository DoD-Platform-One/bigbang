include:
  # Infrastructure
  - local: '/infrastructure/templates.yaml'

  # Clusters
  - local: '/clusters/templates.yaml'

# Single place to update image used for pipelines
.util-image:
  image: registry.dso.mil/platform-one/big-bang/pipeline-templates/pipeline-templates/bb-ci:2.4.67

# Runner tags
.bigbang-runner-tags:
  tags:
    - bb-prod-ci
    - bigbang-runner
    - privileged

.graduated-runner-tags:
  tags:
    - bb-prod-ci
    - graduated-runner
    - privileged

.incubating-runner-tags:
  tags:
    - bb-prod-ci
    - incubating-runner
    - privileged

.sandbox-runner-tags:
  tags:
    - bb-prod-ci
    - sandbox-runner
    - privileged

.generic-runner-tags:
  tags:
    - bb-prod-ci
    - generic

.release-runner-tags:
  tags:
    - bb-prod-ci
    - release-runner
    - release

# Function to pull and source templates.sh
.templates:
  before_script:
    - git clone -b ${PIPELINE_REPO_BRANCH} ${PIPELINE_REPO} ${PIPELINE_REPO_DESTINATION}
    - source ${PIPELINE_REPO_DESTINATION}/library/templates.sh
    - package_auth_setup

.kubectl-output:
  extends: 
  - .util-image
  after_script:
    - source ${PIPELINE_REPO_DESTINATION}/library/templates.sh
    - get_all
    - get_events
    - bigbang_pipeline
    - get_debug
